<article ng-controller="ReportsListCntrl">
  <div class="card h-100" >
    <h4 class="card-header">
        {{i18n.titles.reportsList}}
    </h4>
    <div class="card-body">
      <h4 class="card-title"></h4>
      <p class="card-text"></p>
      <!-- Active Members List -->
      <form name="weekForm" class="mb-3" novalidate>

        <div class="row mb-3">
          <div class="col-8">
            <label for="weekSelect">
              {{i18n.forms.weeks.week}}
            </label>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-8">
            <select id="weekSelect" class="form-control form-control-lg" ng-model="week.id" ng-required="true">
              <option ng-repeat="w in allWeeks" value="{{w.$id}}" >
                {{w.name}} ({{w.$id}})
              </option>
            </select>
          </div>
          <div class="col">
            <button type="button" class="btn btn-lg btn-block btn-success"
              ng-click="getReportsForSelectedWeek()" ng-disabled="weekForm.$invalid">
              {{i18n.btns.viewBtn}}
            </button>
          </div>
        </div>
      </form>
      <!-- Access Table -->
      <table class="table table-responsive-sm table-md table-striped">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Group</th>
            <th scope="col">Date</th>
            <th scope="col">Duration</th>
            <th scope="col">Money</th>
            <th scope="col">Attendance</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-if="!reportsForSelectedWeek || reportsForSelectedWeek.length <=0"
              class="bg-danger text-center text-white">
            <td colspan="6">{{i18n.admin.audit.norecords}}</td>
          </tr>
          <tr ng-repeat="report in reportsForSelectedWeek | orderBy:'-reunion.createdOn'">
            <td scope="row">{{$index + 1}}</td>
            <td scope="row">
              <a ng-href="#!/groups/edit/{{report.reunion.groupId}}">
                {{report.reunion.groupname}}
              </a>
            </td>
            <td>{{report.reunion.createdOn | date: "MMM dd yyyy hh:mm:ss"}}</td>
            <td>{{report.reunion.duration}} min</td>
            <td>${{report.reunion.money}}</td>
            <td>
              {{
                report.attendance.guests.female.adult +
                report.attendance.guests.female.young +
                report.attendance.guests.female.kid +
                report.attendance.guests.male.adult +
                report.attendance.guests.male.young +
                report.attendance.guests.male.kid +
                report.attendance.members.female.adult +
                report.attendance.members.female.young +
                report.attendance.members.female.kid +
                report.attendance.members.male.adult +
                report.attendance.members.male.young +
                report.attendance.members.male.kid
              }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</article>
