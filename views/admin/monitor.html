<section  ng-if="currentSession.user.type == 'admin'">
  <article class="">

    <div class="card mb-3">
      <div class="card-header">
        {{i18n.admin.audit.title}}
      </div>
      <div class="card-body">
        <h4 class="card-title"></h4>
        <p class="card-text"></p>

        <div class="form-group row">
          <div class="col-3"></div>
          <div class="col-6">
            <select class="form-control" onchange="getAuditRecords(this)">
              <option value="none" selected>{{i18n.admin.audit.select}}</option>
              <option value="groups">{{i18n.admin.audit.groupsOptn}}</option>
              <option value="members">{{i18n.admin.audit.membersOptn}}</option>
              <option value="reports">{{i18n.admin.audit.reportsOptn}}</option>
              <option value="weeks">{{i18n.admin.audit.weeksOptn}}</option>
            </select>
          </div>
          <div class="col-3"></div>
        </div>

        <!-- Loading/No Records Alert -->
        <div class="row">
          <div class="col" ng-show="auditRecords && auditRecords.length == 0">
            <div class="alert alert-danger" role="alert">
              {{i18n.admin.audit.norecords}}
            </div>
          </div>
        </div>

        <div class="pre-scrollable">
        <table class="table table-sm table-striped" ng-if="auditRecords && auditRecords.length > 0">
          <thead class="thead-dark">
            <tr>
              <th scope="col">#</th>
              <th scope="col">{{i18n.admin.audit.table.action}}</th>
              <th scope="col">{{i18n.admin.audit.table.on}}</th>
              <th scope="col">{{i18n.admin.audit.table.by}}</th>
              <th scope="col">{{i18n.admin.audit.table.date}}</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="a in auditRecords | orderBy:'-date'">
              <th scope="row">{{$index + 1}}</th>
              <td>{{a.action}}</td>
              <td>
                <a ng-href="#!/{{auditOn}}/edit/{{a.referenceId}}">
                  {{a.referenceId}}
                </a>
              </td>
              <td>{{a.by}}</td>
              <td>{{a.date | date: "MMM dd yyyy hh:mm:ss"}}</td>
            </tr>
          </tbody>
        </table>
        </div>
      </div>
    </div> <!-- Card -->

</section>

<article ng-include="'views/responses/error-norecord.html'" ng-if="currentSession.user.type != 'admin'"></article>
