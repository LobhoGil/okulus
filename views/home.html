<section ng-show="currentSession.memberData">
  <!-- Profile Summary -->
  <article class="row">
    <div class="col-md-6 mb-3">
      <div class="card h-100">
        <div class="card-body">
          <h4 class="card-title">{{currentSession.memberData.shortname}}</h4>
          <hr>
          <p class="card-text">
            <span class="font-weight-bold">{{i18n.profile.lastLogin}}</span><br>
            <span class="font-weight-bold">{{i18n.profile.lastActivity}}</span><br>
            <a ng-href="#!/profile" class="btn btn-warning float-right">{{i18n.profile.viewProfileBtn}}</a>
          </p>
        </div>
      </div>
    </div>
  </article>
  <!-- Message Center -->
  <article class="row" ng-controller="MessageCenterCntrl">
    <div class="col mb-3">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">{{i18n.msgCenter.title}}</h4>
          <hr>
          <div class="pre-scrollable">
            <div class="row" ng-repeat="m in messages | orderBy:'audit.createdOn':true">
                <div class="alert alert-{{m.type}} ml-4 mr-4">
                  {{m.message}}
                  <hr style="margin-bottom: 0;">
                  <span class="small font-weight-light">
                  {{m.audit.createdBy}} - {{m.audit.createdOn | date: "MMM dd yyyy hh:mm a"}}
                  </span>
                  <div class="" ng-if="(m.audit.createdBy == currentSession.user.email) || (currentSession.user.type == 'admin') ">
                    <span class="small font-weight-light" style="cursor:pointer" ng-click="deleteMessage(m.$id)">
                      {{i18n.msgCenter.deleteMsg}}
                    </span>
                  </div>
                </div>
            </div>
          </div>
          <h4 class="card-title"></h4>
          <p class="card-text"></p>
          <form name="messageForm" novalidate ng-submit="saveMessage()"  ng-show="currentSession.user.type == 'admin'">
            <div class="row mt-3">
              <div class="col-sm-10">
                <textarea  class="form-control" placeholder="{{i18n.msgCenter.messageCenterInstruction}}"
                  ng-required="true" ng-model="newmessage"></textarea>
              </div>
              <div class="col-sm-2">
                <button type="submit" class="btn btn-block btn-success h-100"
                    ng-disabled="messageForm.$invalid || messageForm.$pristine">
                  {{i18n.btns.sendBtn}}
                </button>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-10">
                <input type="checkbox" id="importantMsgCheck" ng-model="importantMessage">
                <label for="importantMsgCheck">{{i18n.msgCenter.importanMsg}}</label>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </article>

</section>
